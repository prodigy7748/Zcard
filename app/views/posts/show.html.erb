<h2><%= @post.user.nickname %></h2>
<h1><%= @post.title %></h1>

<%# 將current user帶進model的類別方法去比對與這篇文章的user是否為同一個人 %>
<%= link_to '編輯', edit_post_path(@post) if @post.owned_by?(current_user) %>

<article>
  <%= simple_format(@post.content) %>
</article>

<%= link_to "回#{@board.title}", board_path(@board) %>

<%= form_for(@comment, url: post_comments_path(@post), remote: true) do |f| %>
  <%= f.text_area :content, placeholder: '請輸入留言' %>
  <br>
  <%= f.submit '送出' %>
<% end %>

<ul>
<% @comments.each do |comment| %>
  <li>
    [<%= comment.user.nickname %>] <%# 會發生N+1問題，第一次撈所有comment,再來每個comment會再找它的user%>
    <%= comment.content %>
    <%= link_to '刪除', comment, method: 'delete', data: {confirm: 'you sure?'} if comment.owned_by?(current_user) %>
  </li>
<% end %>
</ul>


